{"ast":null,"code":"import _slicedToArray from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/alex/ubunta/gt-desk/Desktop-GT/src/components/NewDriver.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { addDriver } from \"../redux/countersAC\"; // import '../css/styles.css';\n\nimport '../css/newDriver.css';\nimport trash from '../images/trash.png';\n\nvar NewDriver =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewDriver, _Component);\n\n  function NewDriver() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NewDriver);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NewDriver)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      editOrAdd: \"\",\n      trans: [// {\n        // \ttypeTech: 'Экскаватор гусенечный',\n        // \tmark: 'МАЗ 12345',\n        // \tnumber: '5555 AB-7',\n        // \tdriverId: 1\n        // },\n        // {\n        // \ttypeTech: 'Экскаватор гусенечный',\n        // \tmark: 'МАЗ 56789',\n        // \tnumber: '5555 AB-7',\n        // \tdriverId: 2\n        // }\n      ]\n    };\n\n    _this.onDeleted = function (e) {\n      // let delItem = Number(e.target.parentNode.getAttribute('id')); \n      var delItem = e.target.id;\n      console.log(delItem);\n\n      _this.setState(function (_ref) {\n        var trans = _ref.trans;\n        var before = trans.slice(0, delItem);\n        console.log(before);\n        var after = trans.slice(delItem + 1);\n        console.log(after);\n        var newArray = [].concat(_toConsumableArray(before), _toConsumableArray(after));\n        console.log(newArray);\n        return {\n          trans: newArray\n        };\n      });\n    };\n\n    _this.submit = function (e) {\n      e.preventDefault(); // debugger\n      // this.props.props.history.push(\"driversEditAddDelete\"); // ------- не видит this !\n      // fetch\n\n      if (_this.state.editOrAdd == 'add') {\n        var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n        var url = 'http://178.159.45.189/api/rest-auth/user/drivers/';\n        var formElem = document.getElementById('driver');\n        var formData = new FormData(formElem);\n        var driver = {};\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = formData.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _ref2 = _step.value;\n\n            var _ref3 = _slicedToArray(_ref2, 2);\n\n            var key = _ref3[0];\n            var value = _ref3[1];\n\n            // с остальными не понятно что делать!\n            switch (key) {\n              case 'first_name':\n                driver.first_name = value;\n\n              case 'last_name':\n                driver.last_name = value;\n\n              case 'patronymic':\n                driver.patronymic = value;\n\n              case 'phone':\n                driver.phone = value;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        console.log(\"driver:   \", driver);\n        fetch(url, {\n          method: \"POST\",\n          headers: {\n            \"Authorization\": 'JWT ' + that.props.store.user.token,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(driver)\n        }).then(function (response) {\n          if (response.status !== 200) {\n            console.log('Looks like there was a problem. Status Code: ' + response.status);\n          }\n\n          return response.json();\n        }).then(function (data) {\n          console.log(\"DATA: \", data); // добавить в Redux созданного водителя\n          // that.props.dispatch(addDriver(data));\n          // console.log('add in Redux')\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(NewDriver, [{\n    key: \"createTransItem\",\n    value: function createTransItem(trans) {\n      var _this2 = this;\n\n      return trans.map(function (item, index) {\n        var id_autos = item.id_autos,\n            title_autos = item.title_autos,\n            brand_autos = item.brand_autos,\n            number_autos = item.number_autos;\n        return React.createElement(\"div\", {\n          key: index,\n          id: id_autos,\n          className: \"fix-trans-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, \" \", index + 1, \" - \", title_autos), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, \" \", brand_autos, \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, \" \", number_autos, \" \")), React.createElement(\"img\", {\n          src: trash,\n          alt: \"Trash\",\n          id: index,\n          onClick: _this2.onDeleted,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }));\n      });\n    } // удаляется из локального стэйта, потом просто перезаписывается Redux \n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      console.log(this.props.flag);\n      var flagDr = this.props.flag == -1 ? \"add\" : \"edit\"; // console.log(flagDr) \n\n      this.setState({\n        editOrAdd: flagDr\n      });\n\n      if (this.props.flag !== -1) {\n        var index = this.props.drivers.findIndex(function (el) {\n          return el.id === _this3.props.flag;\n        });\n        console.log(this.props.drivers[index]);\n        var driver = this.props.drivers[index];\n        document.querySelectorAll('#driver>input')[0].value = driver.first_name;\n        document.querySelectorAll('#driver>input')[1].value = driver.last_name;\n        document.querySelectorAll('#driver>input')[2].value = driver.patronymic;\n        document.querySelectorAll('#driver>input')[3].value = driver.phone;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var transItems = null; // if(this.props.flag !== -1){\n      // \tlet transp = this.props.drivers[this.props.drivers.findIndex((el) => el.id === this.props.flag)].autos;\n      // \ttransItems = this.createTransItem(transp);\n      // \tthis.setState({trans: transp}) \n      // }\n\n      return React.createElement(\"div\", {\n        className: \"main-container \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"newDriver\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \" \\u0412\\u041E\\u0414\\u0418\\u0422\\u0415\\u041B\\u0418\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        id: \"driver\",\n        onSubmit: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"radioB\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"on_of\",\n        id: \"on\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"on\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"\\u0412\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"on_of\",\n        id: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"\\u0412\\u044B\\u043A\\u043B\\u044E\\u0447\\u0438\\u0442\\u044C \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"))), React.createElement(\"input\", {\n        name: \"first_name\",\n        id: \"qwe\",\n        placeholder: \"\\u0418\\u0432\\u0430\\u043D\",\n        type: \"text\",\n        required: true,\n        pattern: \"[\\u0410-\\u042F\\u0430-\\u044F/-]{2,40}\",\n        title: \"\\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0440\\u0443\\u0441\\u0441\\u043A\\u0438\\u0435 \\u0431\\u0443\\u043A\\u0432\\u044B\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"last_name\",\n        placeholder: \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\",\n        type: \"text\",\n        required: true,\n        pattern: \"[\\u0410-\\u042F\\u0430-\\u044F/-]{2,40}\",\n        title: \"\\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0440\\u0443\\u0441\\u0441\\u043A\\u0438\\u0435 \\u0431\\u0443\\u043A\\u0432\\u044B\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"patronymic\",\n        placeholder: \"\\u0418\\u0432\\u0430\\u043D\\u043E\\u0432\\u0438\\u0447\",\n        type: \"text\",\n        required: true,\n        pattern: \"[\\u0410-\\u042F\\u0430-\\u044F/-]{2,40}\",\n        title: \"\\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0440\\u0443\\u0441\\u0441\\u043A\\u0438\\u0435 \\u0431\\u0443\\u043A\\u0432\\u044B\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"phone\",\n        placeholder: \"+ 375 33 654 75 80\",\n        required: true,\n        title: \"375 29 123 45 67\",\n        pattern: \"^([\\\\+]?375|(8[\\\\s|\\\\-]?0))[\\\\s|\\\\-]?(29|33|25|44|33|17)[\\\\s|\\\\-]?([0-9]{3}[\\\\s|\\\\-]?[0-9]{2}[\\\\s|\\\\-]?[0-9]{2}[\\\\s|\\\\-]?)$\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"fix-transport \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442:\"), transItems), React.createElement(\"select\", {\n        className: \"for-input for-input-width95\",\n        name: \"equipmentName\",\n        id: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"\\u0421\\u0430\\u043C\\u043E\\u0441\\u0432\\u0430\\u043B\"), React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u0441(\\u0433\\u0440\\u0443\\u0437\\u043E\\u0432\\u043E\\u0439)\"), React.createElement(\"option\", {\n        value: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u0433\\u0440\\u0443\\u0437\\u0447\\u0438\\u043A\"), React.createElement(\"option\", {\n        value: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u043B\\u044C\\u0434\\u043E\\u0437\\u0435\\u0440\"), React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440(\\u043A\\u043E\\u043B\\u0435\\u0441\\u043D\\u044B\\u0439)\"), React.createElement(\"option\", {\n        value: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440 \\u0441\\u043D\\u0435\\u0433\\u043E\\u0443\\u0431\\u043E\\u0440\\u043E\\u0447\\u043D\\u044B\\u0439\"), React.createElement(\"option\", {\n        value: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"\\u041C\\u0430\\u043D\\u0438\\u043F\\u0443\\u043B\\u044F\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"\\u042D\\u0432\\u0430\\u043A\\u0443\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"\\u0410\\u0432\\u0442\\u043E\\u043A\\u0440\\u0430\\u043D\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"\\u0410\\u0441\\u0441\\u0438\\u043D\\u0435\\u0437\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442\")), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: 'driversEditAddDelete'\n        },\n        className: \"colorWhite\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\")), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn\",\n        form: \"driver\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \")))));\n    }\n  }]);\n\n  return NewDriver;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  console.log(state, \"             NewDriver\");\n  return {\n    store: state.store,\n    drivers: state.store.drivers,\n    flag: state.store.driverAddOrEdit\n  };\n};\n\nexport default connect(mapStateToProps)(NewDriver);","map":{"version":3,"sources":["/home/alex/ubunta/gt-desk/Desktop-GT/src/components/NewDriver.jsx"],"names":["React","Component","Link","connect","addDriver","trash","NewDriver","state","editOrAdd","trans","onDeleted","e","delItem","target","id","console","log","setState","before","slice","after","newArray","submit","preventDefault","that","url","formElem","document","getElementById","formData","FormData","driver","entries","key","value","first_name","last_name","patronymic","phone","fetch","method","headers","props","store","user","token","body","JSON","stringify","then","response","status","json","data","map","item","index","id_autos","title_autos","brand_autos","number_autos","flag","flagDr","drivers","findIndex","el","querySelectorAll","transItems","pathname","mapStateToProps","driverAddOrEdit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\nimport { addDriver } from \"../redux/countersAC\";\n\n// import '../css/styles.css';\nimport '../css/newDriver.css';\nimport trash from '../images/trash.png';\n\n\nclass NewDriver extends Component {\n\n\tstate= {\n\t\teditOrAdd: \"\",\n\t\ttrans: [\n\t\t\t// {\n\t\t\t// \ttypeTech: 'Экскаватор гусенечный',\n\t\t\t// \tmark: 'МАЗ 12345',\n\t\t\t// \tnumber: '5555 AB-7',\n\t\t\t// \tdriverId: 1\n\t\t\t// },\n\t\t\t// {\n\t\t\t// \ttypeTech: 'Экскаватор гусенечный',\n\t\t\t// \tmark: 'МАЗ 56789',\n\t\t\t// \tnumber: '5555 AB-7',\n\t\t\t// \tdriverId: 2\n\t\t\t// }\n\t\t]\n\t}\n\n\tcreateTransItem (trans) {\n\t\treturn trans.map((item, index) => {\n\t\t\tconst {id_autos, title_autos, brand_autos, number_autos} = item;\n\t\t\treturn (\n\n\t\t\t\t<div key={index} id={id_autos} className='fix-trans-item'>\n\t\t\t\t\t<div className='info'>\n\t\t\t\t\t\t<p> {index+1} - {title_autos}</p>\n\t\t\t\t\t\t<p> {brand_autos} </p>\n\t\t\t\t\t\t<p> {number_autos} </p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<img src={trash} alt=\"Trash\" id={index} onClick={this.onDeleted}/>\n\t\t\t\t</div>\n\t\t\t)\n\t\t})\n\t}\n\n\t// удаляется из локального стэйта, потом просто перезаписывается Redux \n\tonDeleted = (e) => { \n\t\t// let delItem = Number(e.target.parentNode.getAttribute('id')); \n\t\tlet delItem = e.target.id;\n\t\tconsole.log(delItem) \n\n\t\tthis.setState(({trans}) => { \n\t\t\tconst before = trans.slice(0, delItem); \n\t\t\tconsole.log(before) \n\t\t\tconst after = trans.slice(delItem+1); \n\t\t\tconsole.log(after) \n\t\t\tconst newArray = [ ...before, ...after]; \n\t\t\tconsole.log(newArray) \n\t\t\treturn { \n\t\t\t\ttrans: newArray \n\t\t\t} \n\t\t}) \n\t} \n\n\tsubmit = (e) => {\n\t\te.preventDefault();\n\n\t\t// debugger\n\t\t// this.props.props.history.push(\"driversEditAddDelete\"); // ------- не видит this !\n\n\t\t// fetch\n\t\tif(this.state.editOrAdd == 'add'){\n\t\t\tconst that = this;\n\n\t        const url = 'http://178.159.45.189/api/rest-auth/user/drivers/'\n\t        var formElem = document.getElementById('driver')\n\t        var formData = new FormData(formElem)\n\n\t        var driver = {}\n\n\t        for (var [key, value] of formData.entries()) {\n\n\t            // с остальными не понятно что делать!\n\t            switch (key) {\n\t            \tcase 'first_name' : driver.first_name = value;\n\t            \tcase 'last_name' : driver.last_name = value;\n\t            \tcase 'patronymic' : driver.patronymic = value;\n\t            \tcase 'phone' : driver.phone = value;\n\t            }\n\t        }\n\t        console.log(\"driver:   \", driver)\n\n\t        fetch(url, {\n\t            method: \"POST\",\n\t            headers: {\n\t                \"Authorization\": 'JWT ' + that.props.store.user.token,\n\t                \"Content-Type\": \"application/json\"\n\t            }\n\t            ,body: JSON.stringify(driver),\n\t        }).then((response) => {\n\t                if (response.status !== 200) {\n\t                    console.log('Looks like there was a problem. Status Code: ' +\n\t                        response.status);\n\t                }\n\t                return response.json();\n\t            })\n\t            .then((data) => {\n\n\t                console.log(\"DATA: \", data);\n\n\t                // добавить в Redux созданного водителя\n\t          \t\t// that.props.dispatch(addDriver(data));\n\n\t\t\t        // console.log('add in Redux')\n\t            })\n\t\t}\n\t}\n\n\tcomponentDidMount () {\n\t\tconsole.log(this.props.flag)\n\t\tlet flagDr = (this.props.flag == -1) ? \"add\" : \"edit\"; \n\t\t// console.log(flagDr) \n\t\tthis.setState({editOrAdd : flagDr});\n\n\t\tif(this.props.flag !== -1) {\n\t\t\tlet index = this.props.drivers.findIndex((el) => el.id === this.props.flag);\n\t\t\tconsole.log(this.props.drivers[index]);\n\n\t\t\tconst driver = this.props.drivers[index];\n\n\t\t\tdocument.querySelectorAll('#driver>input')[0].value = driver.first_name;\n\t\t\tdocument.querySelectorAll('#driver>input')[1].value = driver.last_name;\n\t\t\tdocument.querySelectorAll('#driver>input')[2].value = driver.patronymic;\n\t\t\tdocument.querySelectorAll('#driver>input')[3].value = driver.phone;\n\t\t}\n\t}\n\n\n\trender() {\n\n\t\tlet transItems = null;\n\n\t\t// if(this.props.flag !== -1){\n\t\t// \tlet transp = this.props.drivers[this.props.drivers.findIndex((el) => el.id === this.props.flag)].autos;\n\t\t// \ttransItems = this.createTransItem(transp);\n\t\t// \tthis.setState({trans: transp}) \n\t\t// }\n\n\t\treturn (\n\t\t\t<div className=\"main-container \">\n\t\t\t\t<div className=\"newDriver\">\n\t\t\t\t\t<p> ВОДИТЕЛИ</p>\n\t\t\t\t\t<hr />\t\n\t\t\t\t\t\t<form id=\"driver\" onSubmit={this.submit}>\n\t\t\t\t\t\t\t<div className='radioB'>\n\t\t\t\t\t\t\t\t<div><input  type=\"radio\" name=\"on_of\" id=\"on\" /><label htmlFor=\"on\">Включить приложение</label></div>\n\t\t\t\t\t\t\t\t<div><input  type=\"radio\" name=\"on_of\" id=\"off\" /><label htmlFor=\"off\">Выключить приложение</label></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/*// через innerText прописывать данные на редактирование*/}\n\t\t\t\t\t\t\t<input name=\"first_name\" id=\"qwe\" placeholder=\"Иван\" type=\"text\" required pattern=\"[А-Яа-я/-]{2,40}\" title=\"только русские буквы\"/>\n\t\t\t\t\t\t\t<input name=\"last_name\" placeholder=\"Иванов\" type=\"text\" required pattern=\"[А-Яа-я/-]{2,40}\" title=\"только русские буквы\" />\n\t\t\t\t\t\t\t<input name=\"patronymic\" placeholder=\"Иванович\" type=\"text\" required pattern=\"[А-Яа-я/-]{2,40}\" title=\"только русские буквы\" />\n\t\t\t\t\t\t\t<input name=\"phone\" placeholder=\"+ 375 33 654 75 80\" required title=\"375 29 123 45 67\"\n\t\t\t\t\t\t\t\tpattern=\"^([\\+]?375|(8[\\s|\\-]?0))[\\s|\\-]?(29|33|25|44|33|17)[\\s|\\-]?([0-9]{3}[\\s|\\-]?[0-9]{2}[\\s|\\-]?[0-9]{2}[\\s|\\-]?)$\" />\n\n\t\t\t\t\t\t\t<div className=\"fix-transport \">\n\t\t\t\t\t\t\t\t<p>Закрепленный транспорт:</p>\n\t\t\t\t\t\t\t\t{transItems}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/*// выводить список доступного транспорта, переделать генерирование options */}\n\t\t\t\t\t\t\t\t<select className=\"for-input for-input-width95\" name=\"equipmentName\" id=\"\">\n\t\t\t\t\t\t\t\t\t<option value=\"1\">Самосвал</option>\n\t\t\t\t\t\t\t\t\t<option value=\"2\">Бус(грузовой)</option>\n\t\t\t\t\t\t\t\t\t<option value=\"3\">Погрузчик</option>\n\t\t\t\t\t\t\t\t\t<option value=\"4\">Бульдозер</option>\n\t\t\t\t\t\t\t\t\t<option value=\"5\">Экскаватор(колесный)</option>\n\t\t\t\t\t\t\t\t\t<option value=\"6\">Экскаватор снегоуборочный</option>\n\t\t\t\t\t\t\t\t\t<option value=\"7\">Манипулятор</option>\n\t\t\t\t\t\t\t\t\t<option value=\"8\">Эвакуатор</option>\n\t\t\t\t\t\t\t\t\t<option value=\"9\">Автокран</option>\n\t\t\t\t\t\t\t\t\t<option value=\"10\">Ассинезатор</option>\n\t\t\t\t\t\t\t\t\t<option value=\"11\" >Добавьте транспорт</option>\n\t\t\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t\t<div className=\"buttons\">\n\t\t\t\t\t\t\t\t<Link to={{ pathname: 'driversEditAddDelete' }} className=\"colorWhite\" ><button className=\"btn \">Отмена</button></Link>\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn\" form=\"driver\" >Сохранить </button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\nconst mapStateToProps = function (state) {\n\tconsole.log(state, \"             NewDriver\")\n    return {\n        store: state.store,\n        drivers: state.store.drivers,\n        flag: state.store.driverAddOrEdit\n    };\n};\n\nexport default connect(mapStateToProps)(NewDriver);"]},"metadata":{},"sourceType":"module"}