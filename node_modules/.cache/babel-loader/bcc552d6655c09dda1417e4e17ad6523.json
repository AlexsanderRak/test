{"ast":null,"code":"import _classCallCheck from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/alex/ubunta/gt-desk/Desktop-GT/src/components/TransportEditAddDelete.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getTransportList, deleteTransport, setTransportAddEditFlag } from \"../redux/countersAC\";\nimport '../css/driversEditAddDelete.css';\nimport '../css/main.css';\nimport '../css/adminka.css';\n\nvar TransportEditAddDelete =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TransportEditAddDelete, _Component);\n\n  function TransportEditAddDelete() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TransportEditAddDelete);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TransportEditAddDelete)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.getId = function (e) {\n      return e.target.parentNode.parentNode.getAttribute('id');\n    };\n\n    _this.getEditId = function (e) {\n      console.log(e.target.parentNode.parentNode.parentNode.getAttribute('id'));\n      return e.target.parentNode.parentNode.parentNode.getAttribute('id');\n    };\n\n    _this.getTransport = function () {\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var url = 'http:\\/\\/178.159.45.189/api/technics/autos/';\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": 'JWT ' + that.props.store.user.token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (response) {\n        if (response.status !== 200) {\n          console.log('Looks like there was a problem. Status Code: ' + response.status);\n        }\n\n        return response.json();\n      }).then(function (data) {\n        that.props.dispatch(getTransportList(data)); // записываю в глобальный стэйт\n        // console.log(\"DATA: \", data);\n      });\n    };\n\n    _this.setStateAddNewTransport = function (e) {\n      var flag = -1;\n\n      _this.props.dispatch(setTransportAddEditFlag(flag));\n    };\n\n    _this.submit = function (e) {\n      // e.preventDefault();\n      _this.props.props.history.push(\"/admin/transportEditAddDelete\");\n\n      var id = _this.getId(e); // console.log(id)\n      // fetch\n\n\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var url = \"http://178.159.45.189/api/technics/autos/\".concat(id);\n      var token = that.props.store.user.token;\n      fetch(url, {\n        method: \"DELETE\",\n        headers: {\n          \"Authorization\": 'JWT ' + token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (response) {\n        console.log(response);\n        console.log('delete in DB');\n\n        if (response.status === 200 || response.status === 204) {\n          that.props.dispatch(deleteTransport(Number(id)));\n          console.log('delete in Redux');\n        } else {\n          console.log('Looks like there was a problem. Status Code: ' + response.status);\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TransportEditAddDelete, [{\n    key: \"createTransportItem\",\n    value: function createTransportItem(transports) {\n      var _this2 = this;\n\n      if (!transports) return;\n      return transports.map(function (transport) {\n        var category = transport.category,\n            first_name_driver = transport.first_name_driver,\n            last_name_driver = transport.last_name_driver,\n            patronymic_driver = transport.patronymic_driver,\n            phone_driver = transport.phone_driver,\n            year = transport.year,\n            model = transport.model,\n            number = transport.number,\n            id = transport.id;\n        console.log(transport);\n        return React.createElement(\"div\", {\n          key: id,\n          id: id,\n          className: \"driver-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \" \\u0418\\u043C\\u044F: \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \" \", first_name_driver, \" \")), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \" \\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442: \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \" \", \" \"), \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \" \\u0413\\u043E\\u0441. \\u043D\\u043E\\u043C\\u0435\\u0440: \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \" \", number, \" \"), \" \"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \" \\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430: \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \" \", phone_driver, \" \"), \" \"), React.createElement(\"div\", {\n          className: \"buttons\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: 'newTransport'\n          },\n          className: \"colorWhite\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn\",\n          onClick: function onClick() {\n            return _this2.getEditId;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")), React.createElement(\"button\", {\n          type: \"button\",\n          className: \"btn\",\n          onClick: _this2.submit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \" \\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \")), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }));\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTransport();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var transports = this.props.transports;\n      var transportItems = this.createTransportItem(transports);\n      return React.createElement(\"div\", {\n        className: \"main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"drivers-edit-add-delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \" \\u0422\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442 \"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"drivers div-column-transport \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: 'newTransport'\n        },\n        className: \"colorWhite\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.setStateAddNewTransport,\n        type: \"button\",\n        className: \"btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442\")), React.createElement(\"div\", {\n        className: \"selectTech\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"for-input for-input-width95\",\n        name: \"equipmentName\",\n        id: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"1\",\n        default: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"), React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"\\u0421\\u0430\\u043C\\u043E\\u0441\\u0432\\u0430\\u043B\"), React.createElement(\"option\", {\n        value: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u0441(\\u0433\\u0440\\u0443\\u0437\\u043E\\u0432\\u043E\\u0439)\"), React.createElement(\"option\", {\n        value: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u0433\\u0440\\u0443\\u0437\\u0447\\u0438\\u043A\"), React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u043B\\u044C\\u0434\\u043E\\u0437\\u0435\\u0440\"), React.createElement(\"option\", {\n        value: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440(\\u043A\\u043E\\u043B\\u0435\\u0441\\u043D\\u044B\\u0439)\"), React.createElement(\"option\", {\n        value: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440 \\u0441\\u043D\\u0435\\u0433\\u043E\\u0443\\u0431\\u043E\\u0440\\u043E\\u0447\\u043D\\u044B\\u0439\"), React.createElement(\"option\", {\n        value: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"\\u041C\\u0430\\u043D\\u0438\\u043F\\u0443\\u043B\\u044F\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"\\u042D\\u0432\\u0430\\u043A\\u0443\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"\\u0410\\u0432\\u0442\\u043E\\u043A\\u0440\\u0430\\u043D\"), React.createElement(\"option\", {\n        value: \"11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"\\u0410\\u0441\\u0441\\u0438\\u043D\\u0435\\u0437\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442\")), React.createElement(\"select\", {\n        className: \"for-input for-input-width95\",\n        name: \"equipmentName\",\n        id: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \" \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"\\u0422\\u0438\\u043F:\"), React.createElement(\"option\", {\n        value: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"\\u0421\\u0430\\u043C\\u043E\\u0441\\u0432\\u0430\\u043B\"), React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u0441(\\u0433\\u0440\\u0443\\u0437\\u043E\\u0432\\u043E\\u0439)\"), React.createElement(\"option\", {\n        value: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"\\u041F\\u043E\\u0433\\u0440\\u0443\\u0437\\u0447\\u0438\\u043A\"), React.createElement(\"option\", {\n        value: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"\\u0411\\u0443\\u043B\\u044C\\u0434\\u043E\\u0437\\u0435\\u0440\"), React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440(\\u043A\\u043E\\u043B\\u0435\\u0441\\u043D\\u044B\\u0439)\"), React.createElement(\"option\", {\n        value: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"\\u042D\\u043A\\u0441\\u043A\\u0430\\u0432\\u0430\\u0442\\u043E\\u0440 \\u0441\\u043D\\u0435\\u0433\\u043E\\u0443\\u0431\\u043E\\u0440\\u043E\\u0447\\u043D\\u044B\\u0439\"), React.createElement(\"option\", {\n        value: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"\\u041C\\u0430\\u043D\\u0438\\u043F\\u0443\\u043B\\u044F\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\u042D\\u0432\\u0430\\u043A\\u0443\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u0410\\u0432\\u0442\\u043E\\u043A\\u0440\\u0430\\u043D\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"\\u0410\\u0441\\u0441\\u0438\\u043D\\u0435\\u0437\\u0430\\u0442\\u043E\\u0440\"), React.createElement(\"option\", {\n        value: \"11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u0442\\u0440\\u0430\\u043D\\u0441\\u043F\\u043E\\u0440\\u0442\"))), transportItems)));\n    }\n  }]);\n\n  return TransportEditAddDelete;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  console.log(state, \" transport\");\n  return {\n    store: state.store,\n    transports: state.store.transports\n  };\n};\n\nexport default connect(mapStateToProps)(TransportEditAddDelete);","map":{"version":3,"sources":["/home/alex/ubunta/gt-desk/Desktop-GT/src/components/TransportEditAddDelete.jsx"],"names":["React","Component","Link","connect","getTransportList","deleteTransport","setTransportAddEditFlag","TransportEditAddDelete","getId","e","target","parentNode","getAttribute","getEditId","console","log","getTransport","that","url","fetch","method","headers","props","store","user","token","then","response","status","json","data","dispatch","setStateAddNewTransport","flag","submit","history","push","id","Number","transports","map","transport","category","first_name_driver","last_name_driver","patronymic_driver","phone_driver","year","model","number","pathname","transportItems","createTransportItem","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getTransportList, deleteTransport, setTransportAddEditFlag } from \"../redux/countersAC\";\nimport '../css/driversEditAddDelete.css';\nimport '../css/main.css';\nimport '../css/adminka.css';\n\n\nclass TransportEditAddDelete extends Component {\n\tgetId = (e) => {\n\t\treturn e.target.parentNode.parentNode.getAttribute('id');\n\t}\n\n\n\tgetEditId = (e) => {\n\t\tconsole.log(e.target.parentNode.parentNode.parentNode.getAttribute('id'))\n\t\treturn e.target.parentNode.parentNode.parentNode.getAttribute('id');\n\t}\n\n\tgetTransport = () => {\n        const that = this;\n        const url = 'http:\\/\\/178.159.45.189/api/technics/autos/';\n        fetch(url, {\n            method: \"GET\",\n            headers: {\n                \"Authorization\": 'JWT ' + that.props.store.user.token,\n                \"Content-Type\": \"application/json\"\n            }\n        }).then(\n            function (response) {\n                if (response.status !== 200) {\n                    console.log('Looks like there was a problem. Status Code: ' +\n                        response.status);\n                }\n                return response.json();\n            })\n            .then(function (data) {\n                that.props.dispatch(getTransportList(data)); // записываю в глобальный стэйт\n                // console.log(\"DATA: \", data);\n            })\n    }\n\n    setStateAddNewTransport = (e) => {\n\t\tconst flag = -1;\n\t\tthis.props.dispatch(setTransportAddEditFlag(flag));\n\t}\n\n\tsubmit = (e) => {\n\t\t// e.preventDefault();\n\t\tthis.props.props.history.push(\"/admin/transportEditAddDelete\");\n\t\tconst id = this.getId(e);\n\n\t\t// console.log(id)\n\n\t\t// fetch\n\n\t\tconst that = this\n\n        const url = `http://178.159.45.189/api/technics/autos/${id}`;\n        const token = that.props.store.user.token;\n\n        fetch(url, {\n            method: \"DELETE\",\n            headers: {\n                \"Authorization\": 'JWT ' + token\n                ,\"Content-Type\": \"application/json\"\n            }\n        }).then((response) => {\n              \t\n              \t\tconsole.log(response)\n                \tconsole.log('delete in DB')\n\t        \n\t\t\t        if(response.status === 200 || response.status === 204 ) {\n\t\t\t        \t\n\t\t\t        \tthat.props.dispatch(deleteTransport(Number(id)));\n\n\t\t\t        \tconsole.log('delete in Redux')\n\n\n\t\t\t        } else {\n\t\t\t        \tconsole.log('Looks like there was a problem. Status Code: ' +\n                        response.status);\n\t\t\t        }\n            })\n\t}\n\n\tcreateTransportItem(transports) {\n\t\tif (!transports) return;\n\t\treturn transports.map((transport) => {\n\t\t\tconst { category, first_name_driver, last_name_driver, patronymic_driver, phone_driver, year, model, number, id } = transport;\n\t\t\tconsole.log(transport);\n\t\t\treturn (\n\t\t\t\t<div key={id} id={id} className='driver-item'>\n\t\t\t\t\t<p> Имя: <b> { first_name_driver } </b></p>\n\t\t\t\t\t<p> Закрепленный транспорт: <b> { } </b> </p>\n\t\t\t\t\t<p> Гос. номер: <b> {number} </b> </p>\n\t\t\t\t\t<p> Номер телефона: <b> {phone_driver} </b> </p>\n\t\t\t\t\t<div className='buttons'>\n\t\t\t\t\t\t<Link to={{ pathname: 'newTransport' }} className=\"colorWhite\" ><button type='button' className='btn' onClick={() => this.getEditId}>Редактировать</button></Link>\n\t\t\t\t\t\t<button type='button' className='btn' onClick = {this.submit}> Удалить </button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr />\n\t\t\t\t</div>\n\t\t\t)\n\t\t})\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getTransport();\n\t}\n\n\trender() {\n\n\t\tconst transports = this.props.transports;\n\t\tconst transportItems = this.createTransportItem(transports);\n\n\t\treturn (\n\t\t\t<div className='main-container'>\n\t\t\t\t<div className='drivers-edit-add-delete'>\n\t\t\t\t\t<p> Транспорт </p>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='drivers div-column-transport '>\n\t\t\t\t\t\t<Link to={{ pathname: 'newTransport' }} className=\"colorWhite\" ><button  onClick={ this.setStateAddNewTransport } type='button' className='btn' >Добавить транспорт</button></Link>\n\t\t\t\t\t\t<div className='selectTech'>\n\t\t\t\t\t\t\t<select className=\"for-input for-input-width95\" name=\"equipmentName\" id=\"\">\n\t\t\t\t\t\t\t\t<option value=\"1\" default>Категория:</option>\n\t\t\t\t\t\t\t\t<option value=\"2\">Самосвал</option>\n\t\t\t\t\t\t\t\t<option value=\"3\">Бус(грузовой)</option>\n\t\t\t\t\t\t\t\t<option value=\"4\">Погрузчик</option>\n\t\t\t\t\t\t\t\t<option value=\"5\">Бульдозер</option>\n\t\t\t\t\t\t\t\t<option value=\"6\">Экскаватор(колесный)</option>\n\t\t\t\t\t\t\t\t<option value=\"7\">Экскаватор снегоуборочный</option>\n\t\t\t\t\t\t\t\t<option value=\"8\">Манипулятор</option>\n\t\t\t\t\t\t\t\t<option value=\"9\">Эвакуатор</option>\n\t\t\t\t\t\t\t\t<option value=\"10\">Автокран</option>\n\t\t\t\t\t\t\t\t<option value=\"11\">Ассинезатор</option>\n\t\t\t\t\t\t\t\t<option value=\"12\" >Добавьте транспорт</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<select className=\"for-input for-input-width95\" name=\"equipmentName\" id=\"\">\n\t\t\t\t\t\t\t\t<option value=\" \">Тип:</option>\n\t\t\t\t\t\t\t\t<option value=\"1\">Самосвал</option>\n\t\t\t\t\t\t\t\t<option value=\"2\">Бус(грузовой)</option>\n\t\t\t\t\t\t\t\t<option value=\"3\">Погрузчик</option>\n\t\t\t\t\t\t\t\t<option value=\"4\">Бульдозер</option>\n\t\t\t\t\t\t\t\t<option value=\"5\">Экскаватор(колесный)</option>\n\t\t\t\t\t\t\t\t<option value=\"6\">Экскаватор снегоуборочный</option>\n\t\t\t\t\t\t\t\t<option value=\"7\">Манипулятор</option>\n\t\t\t\t\t\t\t\t<option value=\"8\">Эвакуатор</option>\n\t\t\t\t\t\t\t\t<option value=\"9\">Автокран</option>\n\t\t\t\t\t\t\t\t<option value=\"10\">Ассинезатор</option>\n\t\t\t\t\t\t\t\t<option value=\"11\" >Добавьте транспорт</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{transportItems}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nconst mapStateToProps = function (state) { \n\tconsole.log(state, \" transport\") \n\treturn { \n\t\tstore: state.store, \n\t\ttransports: state.store.transports\n\t}; \n};\n\nexport default connect(mapStateToProps)(TransportEditAddDelete);"]},"metadata":{},"sourceType":"module"}