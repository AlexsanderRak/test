{"ast":null,"code":"import _toConsumableArray from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/ubunta/gt-desk/Desktop-GT/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/ubunta/gt-desk/Desktop-GT/src/components/AddCustomerFeedback.jsx\";\nimport React, { Component } from 'react';\nimport '../css/addCustomerFeedback.css'; // import '../css/main.css';\n\nimport emptyStar from \"../images/emptyStar.svg\";\nimport yellowStar from \"../images/yellowStar.svg\";\nimport addPhoto from '../images/addFile.png';\nimport { Link } from 'react-router-dom';\n\nvar AddCustomerFeedback =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddCustomerFeedback, _Component);\n\n  function AddCustomerFeedback() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddCustomerFeedback);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddCustomerFeedback)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stars: [emptyStar, emptyStar, emptyStar, emptyStar, emptyStar],\n      nameImgLoad: []\n    };\n\n    _this.imgPersonLoad = function (e) {\n      var images = Array.from(e.target.files);\n\n      _this.setState(function (_ref) {\n        var nameImgLoad = _ref.nameImgLoad;\n        var newArray = [].concat(_toConsumableArray(nameImgLoad), _toConsumableArray(images));\n        return {\n          nameImgLoad: newArray\n        };\n      });\n    };\n\n    _this.onDeleted = function (e) {\n      var delItem = Number(e.target.parentNode.getAttribute('id'));\n\n      _this.setState(function (_ref2) {\n        var nameImgLoad = _ref2.nameImgLoad;\n        var before = nameImgLoad.slice(0, delItem);\n        var after = nameImgLoad.slice(delItem + 1);\n        var newArray = [].concat(_toConsumableArray(before), _toConsumableArray(after));\n        return {\n          nameImgLoad: newArray\n        };\n      });\n    };\n\n    _this.check = function () {\n      var fotos = document.getElementsByClassName('fotoName')[0];\n\n      if (!_this.state.nameImgLoad.length) {\n        fotos.innerHTML = \"\";\n        document.querySelector('.foto>p').style.display = 'none';\n      } else {\n        document.querySelector('.foto>p').style.display = 'block';\n\n        if (_this.state.nameImgLoad.length) {\n          fotos.innerHTML = \"\";\n\n          _this.state.nameImgLoad.forEach(function (el, index) {\n            var div = document.createElement('div');\n            div.setAttribute('id', index);\n            var p = document.createElement('p');\n            p.innerText = el.name;\n            var btn = document.createElement('button');\n            btn.setAttribute('type', 'button');\n            btn.setAttribute('class', 'btn');\n            btn.addEventListener('click', _this.onDeleted);\n            btn.innerText = 'удалить';\n            div.appendChild(p);\n            div.appendChild(btn);\n            fotos.appendChild(div);\n          });\n        }\n      }\n    };\n\n    _this.setRating = function (e) {\n      var rating = e.target.getAttribute('id');\n\n      _this.setState(function (_ref3) {\n        var stars = _ref3.stars;\n        var newRating = stars.map(function (el, index) {\n          if (index <= rating) {\n            return yellowStar;\n          }\n\n          return emptyStar;\n        });\n        return {\n          stars: newRating\n        };\n      });\n    };\n\n    _this.hoverRating = function (e) {\n      var currStar = e.target.getAttribute('id');\n      var coll = document.querySelectorAll('.stars>img');\n      var stars = Array.from(coll);\n      var hoverStars = stars.filter(function (el) {\n        return el.getAttribute('id') <= currStar;\n      });\n      hoverStars.forEach(function (el) {\n        el.setAttribute('src', yellowStar);\n      });\n    };\n\n    _this.unhoverRating = function (e) {\n      var currStar = e.target.getAttribute('id');\n      var coll = document.querySelectorAll('.stars>img');\n      var stars = Array.from(coll);\n      var hoverStars = stars.filter(function (el) {\n        return el.getAttribute('id') <= currStar;\n      });\n      hoverStars.forEach(function (el) {\n        el.setAttribute('src', _this.state.stars[el.getAttribute('id')]);\n      });\n    };\n\n    _this.submit = function (e) {\n      e.preventDefault();\n\n      _this.props.props.history.push(\"/admin/messages\"); // fetch\n\n    };\n\n    return _this;\n  }\n\n  _createClass(AddCustomerFeedback, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.check();\n    }\n  }, {\n    key: \"getRating\",\n    value: function getRating() {\n      return this.state.stars.filter(function (el) {\n        return el == yellowStar;\n      }).length;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var client = this.props.client; // console.log(this.props);\n\n      return React.createElement(\"div\", {\n        className: \"main-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"add-customer-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \" \\u041D\\u0410\\u041F\\u0418\\u0428\\u0418\\u0422\\u0415 \\u041E\\u0422\\u0417\\u042B\\u0412 \\u041E \\u041A\\u041B\\u0418\\u0415\\u041D\\u0422\\u0415 \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \" \", client, \" \"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"stars\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.stars[0],\n        alt: \"Star\",\n        id: \"0\",\n        onClick: this.setRating,\n        onMouseOver: this.hoverRating,\n        onMouseOut: this.unhoverRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.stars[1],\n        alt: \"Star\",\n        id: \"1\",\n        onClick: this.setRating,\n        onMouseOver: this.hoverRating,\n        onMouseOut: this.unhoverRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.stars[2],\n        alt: \"Star\",\n        id: \"2\",\n        onClick: this.setRating,\n        onMouseOver: this.hoverRating,\n        onMouseOut: this.unhoverRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.stars[3],\n        alt: \"Star\",\n        id: \"3\",\n        onClick: this.setRating,\n        onMouseOver: this.hoverRating,\n        onMouseOut: this.unhoverRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: this.state.stars[4],\n        alt: \"Star\",\n        id: \"4\",\n        onClick: this.setRating,\n        onMouseOver: this.hoverRating,\n        onMouseOut: this.unhoverRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(\"textarea\", {\n        name: \"customerFeedbackBody\",\n        form: \"customer-feedback\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.submit,\n        id: \"customer-feedback\",\n        name: \"customerFeedbackForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E: \"), React.createElement(\"label\", {\n        htmlFor: \"addPhoto\",\n        className: \"btn label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: addPhoto,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"file\",\n        name: \"photo\",\n        id: \"addPhoto\",\n        multiple: true,\n        accept: \"image/*,image/jpeg\",\n        onChange: this.imgPersonLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"foto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \" \\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u0438: \"), React.createElement(\"div\", {\n        className: \"fotoName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"rating\",\n        value: this.getRating(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: '/admin/historyOfOrders'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \" \\u041D\\u0430\\u0437\\u0430\\u0434 \")), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn\",\n        form: \"customer-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \" \\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \"))));\n    }\n  }]);\n\n  return AddCustomerFeedback;\n}(Component);\n\nexport { AddCustomerFeedback as default };","map":{"version":3,"sources":["/home/alex/ubunta/gt-desk/Desktop-GT/src/components/AddCustomerFeedback.jsx"],"names":["React","Component","addPhoto","Link","AddCustomerFeedback","state","stars","emptyStar","nameImgLoad","imgPersonLoad","e","images","Array","from","target","files","setState","newArray","onDeleted","delItem","Number","parentNode","getAttribute","before","slice","after","check","fotos","document","getElementsByClassName","length","innerHTML","querySelector","style","display","forEach","el","index","div","createElement","setAttribute","p","innerText","name","btn","addEventListener","appendChild","setRating","rating","newRating","map","yellowStar","hoverRating","currStar","coll","querySelectorAll","hoverStars","filter","unhoverRating","submit","preventDefault","props","history","push","client","getRating","pathname"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport '../css/addCustomerFeedback.css';\n// import '../css/main.css';\nimport emptyStar from '../images/emptyStar.svg';\nimport yellowStar from '../images/yellowStar.svg';\nimport addPhoto from '../images/addFile.png';\nimport { Link } from 'react-router-dom'\n\nexport default class AddCustomerFeedback extends Component {\n\n\tstate = {\n\t\tstars: [emptyStar, emptyStar, emptyStar, emptyStar, emptyStar],\n\t\tnameImgLoad: []\n\t}\n\n\timgPersonLoad = (e) => {\n        let images = Array.from(e.target.files);\n        this.setState(({nameImgLoad}) => {\n\t\t\tconst newArray = [ ... nameImgLoad, ... images];\n\t\t\treturn {\n\t\t\t\tnameImgLoad: newArray\n\t\t\t}\n\t\t})\n\n    }\n\n    onDeleted = (e) => {\n    \tlet delItem = Number(e.target.parentNode.getAttribute('id'));\n\n    \tthis.setState(({nameImgLoad}) => {\n\t\t\tconst before = nameImgLoad.slice(0, delItem);\n\t\t\tconst after = nameImgLoad.slice(delItem+1);\n\t\t\tconst newArray = [ ...before, ...after];\n\t\t\treturn {\n\t\t\t\tnameImgLoad: newArray\n\t\t\t} \n\t\t})\n    }\n\n    check = () => {\n    \tconst fotos = document.getElementsByClassName('fotoName')[0];\n    \tif (!this.state.nameImgLoad.length) {\n    \t\tfotos.innerHTML = \"\";\n    \t\tdocument.querySelector('.foto>p').style.display = 'none';\n    \t} else {\n    \t\tdocument.querySelector('.foto>p').style.display = 'block';\n    \t\t\n\t\t\tif(this.state.nameImgLoad.length) { \n\t\t\t\tfotos.innerHTML = \"\";\n\n\t\t\t\tthis.state.nameImgLoad.forEach((el, index) => {\n\t\t\t\t\tlet div = document.createElement('div');\n\t\t\t\t\tdiv.setAttribute('id', index);\n\n\t\t\t\t\tlet p = document.createElement('p');\n\t\t\t\t\tp.innerText = el.name;\n\n\t\t\t\t\tlet btn = document.createElement('button');\n\t\t\t\t\tbtn.setAttribute('type', 'button');\n\t\t\t\t\tbtn.setAttribute('class', 'btn');\n\t\t\t\t\tbtn.addEventListener('click', this.onDeleted);\n\t\t\t\t\tbtn.innerText = 'удалить';\n\n\t\t\t\t\tdiv.appendChild(p);\n\t\t\t\t\tdiv.appendChild(btn);\n\t\t\t\t\tfotos.appendChild(div);\n\t\t\t\t})\n\n\t\t\t}\n    \t}\n    }\n\n    componentDidUpdate() {\n    \tthis.check();\n    }\n\n\tsetRating = (e) => {\n\t\tconst rating = e.target.getAttribute('id');\n\n\t\tthis.setState(({stars}) => {\n\t\t\tlet newRating = stars.map((el, index) => {\n\t\t\t\tif(index <= rating) {\n\t\t\t\t\treturn yellowStar;\n\t\t\t\t}\n\t\t\t\treturn emptyStar;\n\t\t\t})\n\n\t\t\treturn {\n\t\t\t\tstars: newRating\n\t\t\t}\n\t\t})\n\t}\n\n\thoverRating = (e) => {\n\t\tconst currStar = e.target.getAttribute('id');\n\t\tconst coll = document.querySelectorAll('.stars>img');\n\t\tconst stars = Array.from(coll)\n\t\tconst hoverStars = stars.filter((el) => {\n\t\t\treturn el.getAttribute('id') <= currStar;\n\t\t})\n\t\thoverStars.forEach((el) => {\n\t\t\tel.setAttribute('src', yellowStar);\n\t\t})\n\t}\n\n\tunhoverRating = (e) => {\n\t\tconst currStar = e.target.getAttribute('id');\n\t\tconst coll = document.querySelectorAll('.stars>img');\n\t\tconst stars = Array.from(coll)\n\t\tconst hoverStars = stars.filter((el) => {\n\t\t\treturn el.getAttribute('id') <= currStar;\n\t\t})\n\t\thoverStars.forEach((el) => {\n\t\t\tel.setAttribute('src', this.state.stars[el.getAttribute('id')]);\n\t\t})\n\t}\n\n\tgetRating() {\n\t\treturn this.state.stars.filter((el) => el == yellowStar).length;\n\t}\n\n\tsubmit = (e) => {\n\t\te.preventDefault();\n\t\tthis.props.props.history.push(\"/admin/messages\");\n\n\t\t// fetch\n\t}\n\n\trender() {\n\t\tconst {client} = this.props;\n\t\t// console.log(this.props);\n\n\t\treturn (\n\t\t\t<div className = 'main-container'>\n\t\t\t\t<div className='add-customer-feedback'>\n\t\t\t\t\t<p> НАПИШИТЕ ОТЗЫВ О КЛИЕНТЕ </p>\n\t\t\t\t\t<p> {client} </p>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className=\"stars\">\n                        <img src={this.state.stars[0]} alt=\"Star\" id='0' onClick={this.setRating} onMouseOver={this.hoverRating} onMouseOut={this.unhoverRating} />\n                        <img src={this.state.stars[1]} alt=\"Star\" id='1' onClick={this.setRating} onMouseOver={this.hoverRating} onMouseOut={this.unhoverRating} />\n                        <img src={this.state.stars[2]} alt=\"Star\" id='2' onClick={this.setRating} onMouseOver={this.hoverRating} onMouseOut={this.unhoverRating} />\n                        <img src={this.state.stars[3]} alt=\"Star\" id='3' onClick={this.setRating} onMouseOver={this.hoverRating} onMouseOut={this.unhoverRating} />\n                        <img src={this.state.stars[4]} alt=\"Star\" id='4' onClick={this.setRating} onMouseOver={this.hoverRating} onMouseOut={this.unhoverRating} />\n                    </div>\n                    <textarea name=\"customerFeedbackBody\" form='customer-feedback' placeholder=\"Введите текст сообщения...\"></textarea>\n                    <hr />\n                    <form onSubmit={this.submit} id='customer-feedback' name='customerFeedbackForm'>\n                    \t<p> Добавить фото: </p>\n                    \t<label htmlFor=\"addPhoto\" className=\"btn label\"><img src={addPhoto} /></label>\n                    \t<input type=\"file\" name=\"photo\" id=\"addPhoto\" multiple accept=\"image/*,image/jpeg\" onChange={this.imgPersonLoad} />\n                    \t<div className='foto'>\n                    \t\t<p style={{ display: \"none\" }}> Загруженные фотографии: </p>\n                    \t\t{/*<label>{this.state.nameImgLoad}</label>*/}\n                    \t\t<div className=\"fotoName\">\n\n                    \t\t</div>\n                    \t</div>\n                    \t\n\t\t\t\t\t\t<input type='hidden' name='rating' value={this.getRating()}/>\n\t\t\t\t\t</form>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='buttons'>\n\t\t\t\t\t\t<Link to={{ pathname: '/admin/historyOfOrders' }} ><button type='button' className='btn' > Назад </button></Link>\n\t\t\t\t\t\t<button type='submit' className='btn' form='customer-feedback'> Отправить </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}"]},"metadata":{},"sourceType":"module"}